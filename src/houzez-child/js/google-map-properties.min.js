jQuery(function(e){"use strict";if("undefined"!=typeof houzez_map_properties){if(e("#houzez-properties-map").length>0){var a,t,o,i=null,n=new Array,r=new Array,s="",l=1,p=12,u="",c=0,m=0,d=0,g="no",h="",z="roadmap",v=houzez_vars.admin_url+"admin-ajax.php",_=houzez_vars.user_id,f=houzez_vars.not_found,y=houzez_vars.houzez_rtl,w=houzez_vars.processing_text,I=houzez_vars.compare_url,x=houzez_vars.compare_add_icon,M=houzez_vars.add_compare_text,b=houzez_vars.compare_remove_icon,k=houzez_vars.remove_compare_text,T=houzez_vars.compare_limit,L=(houzez_vars.compare_page_not_found,houzez_vars.for_rent_price_slider),j=parseInt(houzez_vars.search_min_price_range),E=parseInt(houzez_vars.search_max_price_range),D=parseInt(houzez_vars.search_min_price_range_for_rent),P=parseInt(houzez_vars.search_max_price_range_for_rent),A=(parseInt(houzez_vars.get_min_price),parseInt(houzez_vars.get_max_price),houzez_vars.currency_position),R=houzez_vars.currency_symbol,B=houzez_vars.thousands_separator,S=parseInt(houzez_vars.is_halfmap),Z=parseFloat(houzez_vars.default_lat),C=parseFloat(houzez_vars.default_long),H=parseInt(houzez_vars.houzez_default_radius),O=/ipad|iphone|ipod|android|blackberry|webos|iemobile|windows phone/i.test(navigator.userAgent.toLowerCase());y="yes"==y,"undefined"!=typeof houzez_map_options&&(s=houzez_map_options.clusterIcon,l=houzez_map_options.map_cluster_enable,p=houzez_map_options.clusterer_zoom,houzez_map_options.closeIcon,u=houzez_map_options.infoWindowPlac,c=houzez_map_options.marker_spiderfier,g=houzez_map_options.markerPricePins,z=houzez_map_options.map_type,""!=(h=houzez_map_options.googlemap_style)&&(h=JSON.parse(h)));var N={zoom:12,maxZoom:16,disableDefaultUI:!0,scrollwheel:!1,styles:h},U={"&amp;":"&","&quot;":'"',"&#039;":"'","&#8217;":"’","&#038;":"&","&lt;":"<","&gt;":">","&#8216;":"‘","&#8230;":"…","&#8221;":"”","&#8211;":"–","&#8212;":"—"};switch(z){case"hybrid":N.mapTypeId=google.maps.MapTypeId.HYBRID;break;case"terrain":N.mapTypeId=google.maps.MapTypeId.TERRAIN;break;case"satellite":N.mapTypeId=google.maps.MapTypeId.SATELLITE;break;default:N.mapTypeId=google.maps.MapTypeId.ROADMAP}a=new google.maps.Map(document.getElementById("houzez-properties-map"),N),t=new google.maps.LatLngBounds;var F=e=>{if("number"==typeof e){for(var a=(e+="").split("."),t=a[0],o=a.length>1?"."+a[1]:"",i=/(\d+)(\d{3})/;i.test(t);)t=t.replace(i,"$1"+B+"$2");return t+o}return e};e(".houzezMapType").on("click",function(t){t.preventDefault();var o,i=e(this).data("maptype");"roadmap"===(o=i)?a.setMapTypeId(google.maps.MapTypeId.ROADMAP):"satellite"===o?a.setMapTypeId(google.maps.MapTypeId.SATELLITE):"hybrid"===o?a.setMapTypeId(google.maps.MapTypeId.HYBRID):"terrain"===o&&a.setMapTypeId(google.maps.MapTypeId.TERRAIN)}),document.getElementById("listing-mapzoomin")&&(ne=a,google.maps.event.addDomListener(document.getElementById("listing-mapzoomin"),"click",function(){var e=parseInt(ne.getZoom(),10);console.log(e),++e>20&&(e=20),ne.setZoom(e)})),document.getElementById("listing-mapzoomout")&&function(e){google.maps.event.addDomListener(document.getElementById("listing-mapzoomout"),"click",function(){var a=parseInt(e.getZoom(),10);console.log(a),--a<0&&(a=0),e.setZoom(a)})}(a),e("#houzez-gmap-next").on("click",function(){!function(e){for(++m>n.length&&(m=1);!1===n[m-1].visible;)++m>n.length&&(m=1);n[m]&&(n[m].getMap()||0==l||(i.setMaxZoom(1),i.repaint())),google.maps.event.trigger(n[m-1],"click"),null!=n[m-1].getPosition()&&e.panTo(n[m-1].getPosition())}(a)}),e("#houzez-gmap-prev").on("click",function(){!function(e){for(--m<1&&(m=n.length);!1===n[m-1].visible;)--m>n.length&&(m=1);n[m]&&(n[m].getMap()||0==l||(i.setMaxZoom(1),i.repaint())),google.maps.event.trigger(n[m-1],"click"),null!=n[m-1].getPosition()&&e.panTo(n[m-1].getPosition())}(a)});google.maps.event.addListener(a,"tilesloaded",function(){jQuery(".houzez-map-loading").hide()});var W=function(){0!=l&&null!=i&&i.clearMarkers()},$=function(){for(var e=0;e<n.length;e++)n[e].setMap(null);n=[]},q=function(){a.fitBounds(n.reduce(function(e,a){return e.extend(a.getPosition())},new google.maps.LatLngBounds))},Q=function(e,a){if(0!=c)var m=new OverlappingMarkerSpiderfier(a,{markersWontMove:!0,markersWontHide:!0,keepSpiderfied:!0,circleSpiralSwitchover:1/0,nearbyDistance:50});o=function(){for(;r.length>0;){r.pop().close()}};for(var d=function(e,a,t){google.maps.event.addListener(a,"click",function(){o(),t.open(e,a),r.push(t);var i=t.getContent().getElementsByClassName("listing-thumbnail");i.length&&i[0].dataset.src&&(i[0].src=i[0].dataset.src)})},h=0;h<e.length;h++)if(e[h].lat&&e[h].lng){if("yes"==g)var z='<div data-id="'+e[h].property_id+'" class="gm-marker gm-marker-color-'+e[h].term_id+'"><div class="gm-marker-price">'+e[h].pricePin+"</div></div>",v=new RichMarker({map:a,position:new google.maps.LatLng(e[h].lat,e[h].lng),draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:z});else{var _=e[h].marker,f=new google.maps.Size(44,56);window.devicePixelRatio>1.5&&e[h].retinaMarker&&(_=e[h].retinaMarker,f=new google.maps.Size(44,56));var y={url:_,size:f,scaledSize:new google.maps.Size(44,56)};v=new google.maps.Marker({position:new google.maps.LatLng(e[h].lat,e[h].lng),map:a,icon:y,title:e[h].title.replace(/\&[\w\d\#]{2,5}\;/g,function(e){return U[e]}),animation:google.maps.Animation.DROP,visible:!0})}t.extend(v.getPosition());var w=document.createElement("div");w.className="map-info-window";var I="";I+='<div class="item-wrap">',I+='<div class="item-header">',e[h].thumbnail?I+='<a class="hover-effect" href="'+e[h].url+'"><img class="img-fluid listing-thumbnail" src="'+u+'" data-src="'+e[h].thumbnail+'" alt="'+e[h].title+'"/></a>':I+='<a class="hover-effect" href="'+e[h].url+'"><img class="img-fluid listing-thumbnail" src="'+u+'" alt="'+e[h].title+'"/></a>',I+="</div>",I+='<div class="item-body flex-grow-1">',I+='<h2 class="item-title">',I+='<a href="'+e[h].url+'">'+e[h].title+"</a>",I+="</h2>",I+='<ul class="list-unstyled item-info">',e[h].price&&(I+='<li class="item-price">'+e[h].price+"</li>"),e[h].property_type&&(I+='<li class="item-type">'+e[h].property_type+"</li>"),I+="</ul>",I+="</div>",I+="</div>",w.innerHTML=I,d(a,v,new google.maps.InfoWindow({content:w})),0!=c&&m.addMarker(v),n.push(v)}if(a.fitBounds(t),0!=l){var x={ignoreHidden:!0,maxZoom:parseInt(p),styles:[{url:s,height:48,width:48,textColor:"#ffffff"}]};i=new MarkerClusterer(a,n,x)}};if(houzez_map_properties.length>0)Q(houzez_map_properties,a);else{N={center:new google.maps.LatLng(Z,C),zoom:10,maxZoom:16,styles:h,disableDefaultUI:!0,scrollwheel:!1};a=new google.maps.Map(document.getElementById("houzez-properties-map"),N),jQuery(".houzez-map-loading").hide()}var G=function(){return e("#half-map-listing-area .item-wrap").each(function(t){e(this).on("mouseenter",function(){a&&(n[t].getMap()||0==l||(i.setMaxZoom(1),i.repaint()),google.maps.event.trigger(n[t],"click"))})}),e("#half-map-listing-area .item-wrap").on("mouseleave",function(){o(),0!=l&&(i.setMaxZoom(13),i.repaint())}),!1};O||G();var Y=function(t){var o=e("#houzez_ajax_container"),i=e("#half-map-listing-area .page-title span"),n=e(".houzez-search-form-js"),r=e("#ajax_sort_properties").val(),s=e(".listing-view").data("layout");return e(this).parents(".houzez-search-form-js").addClass("sdfsdfsdffs"),e.ajax({type:"GET",dataType:"json",url:v,data:n.serialize()+"&action=houzez_half_map_listings&paged="+t+"&sortby="+r+"&item_layout="+s,beforeSend:function(){e(".houzez-map-loading").show(),o.empty().append('<div id="houzez-map-loading" class="houzez-map-loading"><div class="mapPlaceholder"><div class="loader-ripple spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div></div>')},success:function(t){var n;return""!=t.query&&e('input[name="search_args"]').val(t.query),""!=t.search_uri&&e('input[name="search_URI"]').val(t.search_uri),e(".map-notfound").remove(),e(".search-no-results-found").remove(),e(".houzez-map-loading").hide(),!0===t.getProperties?(W(),$(),Q(t.properties,a),q(),o.empty().html(t.propHtml),i.empty().html(t.total_results),V(),houzez_init_add_favorite(v,_),houzez_init_remove_favorite(v,_),houzez_listing_lightbox(v,w,y,_),n=houzezGetCookie("houzez_compare_listings"),add_to_compare(I,x,b,M,k,T,n,4),remove_from_compare(n,x,b,M,k),O||G(),e('[data-toggle="tooltip"]').tooltip()):(W(),$(),e("#houzez-properties-map").append('<div class="map-notfound">'+f+"</div>"),o.empty().html('<div class="search-no-results-found">'+f+"</div>"),i.empty().html(t.total_results)),!1},error:function(e,a,t){console.log(e.status),console.log(e.responseText),console.log(t)}}),!1},J=()=>{var a=e("form.houzez-search-filters-js"),t=a.attr("action"),o=a.find(":input").filter(function(a,t){if(""!=e(t).val()&&"search_geolocation"!=e(t).attr("name")&&"search_URI"!=e(t).attr("name")&&"search_args"!=e(t).attr("name")&&"houzez_save_search_ajax"!=e(t).attr("name"))return!0}).serialize();(e=>{window.history.pushState({houzezTheme:!0},"",e)})(t=-1!=t.indexOf("?")?t+"&"+o:t+"?"+o)},K=function(e){W(),J(),Y(e)},V=function(){return e(".houzez_ajax_pagination a").on("click",function(a){a.preventDefault(),d=e(this).data("houzepagi"),K(d)}),!1};V();e("#ajax_sort_properties").on("change",function(){K(d=0)});var X=function(a,t){if(e(".price-range").slider({range:!0,min:a,max:t,values:[a,t],slide:function(a,t){if("after"==A)var o=F(t.values[0])+R,i=F(t.values[1])+R;else o=R+F(t.values[0]),i=R+F(t.values[1]);e(".min-price-range-hidden").val(t.values[0]),e(".max-price-range-hidden").val(t.values[1]),e(".min-price-range").text(o),e(".max-price-range").text(i)},stop:function(e,a){K(d=0)}}),"after"==A)var o=F(e(".price-range").slider("values",0))+R,i=F(e(".price-range").slider("values",1))+R;else o=R+F(e(".price-range").slider("values",0)),i=R+F(e(".price-range").slider("values",1));e(".min-price-range").text(o),e(".max-price-range").text(i),e(".min-price-range-hidden").val(e(".price-range").slider("values",0)),e(".max-price-range-hidden").val(e(".price-range").slider("values",1))};if(e(".price-range").length>0&&1==S)e(".status-js").val()==L?X(D,P):X(j,E),e(".status-js").on("change",function(){e(this).val()==L?X(D,P):X(j,E)});e("#radius-range-slider").length>0&&(ie=H,e("#radius-range-slider").slider({value:ie,min:0,max:100,step:1,value:e("#radius-range-value").data("default"),slide:function(a,t){e("#radius-range-text").html(t.value),e("#radius-range-value").val(t.value)},stop:function(a,t){e("#houzez-properties-map").length>0&&K(d=0)}}),e("#radius-range-text").html(e("#radius-range-slider").slider("value")),e("#radius-range-value").val(e("#radius-range-slider").slider("value"))),e("select.houzez_search_ajax, input.houzez_search_ajax").on("change",function(){K(d=0)}),e(".half-map-wrap").length>0&&e(".btn-apply, .half-map-search-js-btn, #auto_complete_ajax").on("click",function(e){e.preventDefault(),K(d=0)})}if(e("#houzez-btn-map-view").on("click",function(t){t.preventDefault(),e("#half-map-listing-area, .listing-wrap").hide(),e("#map-view-wrap").show(),google.maps.event.trigger(a,"resize"),q()}),e("#houzez-btn-listing-view").on("click",function(a){a.preventDefault(),e("#map-view-wrap").hide(),e("#half-map-listing-area, .listing-wrap").show()}),e(".hz-map-field-js").length>0){var ee=houzez_vars.geo_country_limit,ae=houzez_vars.geocomplete_country,te=function(e){this.$container=e};te.prototype={init:function(){this.initDomElements(),this.autocomplete()},initDomElements:function(){this.addressField=this.$container.data("address-field")},autocomplete:function(){var e=this,a=this.addressField;if(null!==a){var t=document.getElementById(a),o=new google.maps.places.Autocomplete(t,{types:["geocode","establishment"]});0!=ee&&""!=ae&&("UAE"==ae&&(ae="AE"),o.setComponentRestrictions({country:[ae]})),google.maps.event.addListener(o,"place_changed",function(){var a=o.getPlace(),t=new google.maps.LatLng(a.geometry.location.lat(),a.geometry.location.lng());if(e.updateCoordinate(t),S){K(0)}})}},updateCoordinate:function(a){e('input[name="lat"]').val(a.lat()),e('input[name="lng"]').val(a.lng())}};var oe=function(){var a=e(this);new te(a).init()};e(".hz-map-field-js").each(oe)}}var ie,ne});